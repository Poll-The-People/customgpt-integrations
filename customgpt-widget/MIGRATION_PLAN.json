{
  "project": "CustomGPT Widget - Next.js Migration",
  "version": "1.0",
  "status": "planning",
  "estimatedHours": "40-60",
  "estimatedWeeks": 8,
  "phases": [
    {
      "phase": 1,
      "name": "Preparation & Setup",
      "week": 1,
      "goal": "Set up Next.js project structure and validate core dependencies",
      "tasks": [
        {
          "id": "P1-T1",
          "title": "Create Next.js 14 project with TypeScript",
          "status": "pending",
          "priority": "high",
          "estimatedHours": 2,
          "commands": [
            "npx create-next-app@latest customgpt-widget-next --typescript --app --tailwind"
          ],
          "dependencies": []
        },
        {
          "id": "P1-T2",
          "title": "Install core dependencies",
          "status": "pending",
          "priority": "high",
          "estimatedHours": 1,
          "commands": [
            "npm install openai google-tts-api elevenlabs edge-tts",
            "npm install @vercel/blob @aws-sdk/client-s3",
            "npm install formdata-node"
          ],
          "dependencies": ["P1-T1"]
        },
        {
          "id": "P1-T3",
          "title": "Set up directory structure",
          "status": "pending",
          "priority": "high",
          "estimatedHours": 1,
          "directories": [
            "app/",
            "app/api/",
            "components/",
            "lib/",
            "lib/ai/",
            "lib/audio/",
            "public/",
            "public/avatars/"
          ],
          "dependencies": ["P1-T1"]
        },
        {
          "id": "P1-T4",
          "title": "Create .env.local with environment variables",
          "status": "pending",
          "priority": "high",
          "estimatedHours": 0.5,
          "envVars": [
            "OPENAI_API_KEY",
            "CUSTOMGPT_PROJECT_ID",
            "CUSTOMGPT_API_KEY",
            "TTS_PROVIDER",
            "STT_MODEL",
            "NEXT_PUBLIC_AVATAR_GLB_URL"
          ],
          "dependencies": ["P1-T1"]
        },
        {
          "id": "P1-T5",
          "title": "Test WebM audio recording in browser",
          "status": "pending",
          "priority": "high",
          "estimatedHours": 3,
          "testCases": [
            "Create test component with MediaRecorder",
            "Verify audio/webm;codecs=opus support",
            "Test on Chrome, Firefox, Safari",
            "Implement Safari fallback to MP4"
          ],
          "dependencies": ["P1-T3"]
        },
        {
          "id": "P1-T6",
          "title": "Create next.config.js configuration",
          "status": "pending",
          "priority": "medium",
          "estimatedHours": 1,
          "dependencies": ["P1-T1"]
        },
        {
          "id": "P1-T7",
          "title": "Set up TypeScript configuration",
          "status": "pending",
          "priority": "medium",
          "estimatedHours": 1,
          "dependencies": ["P1-T1"]
        }
      ]
    },
    {
      "phase": 2,
      "name": "Backend Migration - Core Services",
      "week": "2-3",
      "goal": "Port all Python backend logic to TypeScript API Routes",
      "tasks": [
        {
          "id": "P2-T1",
          "title": "Port Speech-to-Text (lib/audio/stt.ts)",
          "status": "pending",
          "priority": "critical",
          "estimatedHours": 4,
          "sourceFile": "backend/stt.py",
          "targetFile": "lib/audio/stt.ts",
          "subtasks": [
            "Port transcribe() function",
            "Test with WebM audio (no FFmpeg)",
            "Test Safari fallback (MP4/MPEG)",
            "Add retry logic with exponential backoff",
            "Unit tests with mock audio files"
          ],
          "dependencies": ["P1-T2", "P1-T5"]
        },
        {
          "id": "P2-T2",
          "title": "Port Text-to-Speech (lib/audio/tts.ts)",
          "status": "pending",
          "priority": "critical",
          "estimatedHours": 6,
          "sourceFile": "backend/tts.py",
          "targetFile": "lib/audio/tts.ts",
          "subtasks": [
            "Port OpenAI TTS provider",
            "Port gTTS provider",
            "Port ElevenLabs provider",
            "Port Edge TTS provider",
            "Port StreamElements provider",
            "Implement provider factory pattern",
            "Unit tests for each provider"
          ],
          "dependencies": ["P1-T2"]
        },
        {
          "id": "P2-T3",
          "title": "Port CustomGPT client (lib/ai/customgpt-client.ts)",
          "status": "pending",
          "priority": "critical",
          "estimatedHours": 5,
          "sourceFile": "backend/customgpt_client.py",
          "targetFile": "lib/ai/customgpt-client.ts",
          "subtasks": [
            "Port CustomGPTClient class",
            "Port session management",
            "Port streaming support (SSE)",
            "Port message reactions API",
            "Port citations API",
            "Unit tests with mocked API responses"
          ],
          "dependencies": ["P1-T2"]
        },
        {
          "id": "P2-T4",
          "title": "Port AI completion logic (lib/ai/completion.ts)",
          "status": "pending",
          "priority": "critical",
          "estimatedHours": 3,
          "sourceFile": "backend/ai.py",
          "targetFile": "lib/ai/completion.ts",
          "subtasks": [
            "Port OpenAI completion logic",
            "Port response truncation for voice mode",
            "Port streaming optimization (early stop)",
            "Unit tests with mocked responses"
          ],
          "dependencies": ["P2-T3"]
        },
        {
          "id": "P2-T5",
          "title": "Port response truncation (lib/ai/truncate.ts)",
          "status": "pending",
          "priority": "high",
          "estimatedHours": 2,
          "sourceFile": "backend/ai.py",
          "targetFile": "lib/ai/truncate.ts",
          "subtasks": [
            "Port _truncate_for_voice() function",
            "Port sentence/word counting logic",
            "Unit tests for truncation edge cases"
          ],
          "dependencies": ["P1-T2"]
        },
        {
          "id": "P2-T6",
          "title": "Port validation logic (lib/validation.ts)",
          "status": "pending",
          "priority": "high",
          "estimatedHours": 3,
          "sourceFile": "backend/validation.py",
          "targetFile": "lib/validation.ts",
          "subtasks": [
            "Port startup validation",
            "Port API key validation",
            "Port configuration validation",
            "Unit tests for validation scenarios"
          ],
          "dependencies": ["P1-T2"]
        },
        {
          "id": "P2-T7",
          "title": "Port retry utilities (lib/retry.ts)",
          "status": "pending",
          "priority": "high",
          "estimatedHours": 3,
          "sourceFile": "backend/retry_utils.py",
          "targetFile": "lib/retry.ts",
          "subtasks": [
            "Port exponential backoff with jitter",
            "Port configurable retry attempts",
            "Port intelligent retry detection",
            "Unit tests for retry scenarios"
          ],
          "dependencies": ["P1-T2"]
        },
        {
          "id": "P2-T8",
          "title": "Port fallback chains (lib/fallback.ts)",
          "status": "pending",
          "priority": "high",
          "estimatedHours": 4,
          "sourceFile": "backend/fallback.py",
          "targetFile": "lib/fallback.ts",
          "subtasks": [
            "Port STT fallback logic",
            "Port AI completion fallback chain",
            "Port TTS fallback chain",
            "Integration tests for fallback chains"
          ],
          "dependencies": ["P2-T1", "P2-T2", "P2-T4"]
        },
        {
          "id": "P2-T9",
          "title": "Port markdown processor (lib/markdown-processor.ts)",
          "status": "pending",
          "priority": "medium",
          "estimatedHours": 2,
          "sourceFile": "backend/markdown_processor.py",
          "targetFile": "lib/markdown-processor.ts",
          "subtasks": [
            "Port markdown fixing logic",
            "Port blockquote/list formatting",
            "Unit tests for markdown edge cases"
          ],
          "dependencies": ["P1-T2"]
        }
      ]
    },
    {
      "phase": 3,
      "name": "Backend Migration - API Routes",
      "week": "3-4",
      "goal": "Create Next.js API routes for all endpoints",
      "tasks": [
        {
          "id": "P3-T1",
          "title": "Create voice mode endpoint (app/api/inference/route.ts)",
          "status": "pending",
          "priority": "critical",
          "estimatedHours": 5,
          "sourceFile": "backend/main.py",
          "targetFile": "app/api/inference/route.ts",
          "subtasks": [
            "Parse multipart form data",
            "Call transcribe() - STT",
            "Call getCompletion() - AI",
            "Call textToSpeech() - TTS",
            "Return audio + conversation headers",
            "Add error handling and logging"
          ],
          "dependencies": ["P2-T1", "P2-T2", "P2-T4"]
        },
        {
          "id": "P3-T2",
          "title": "Create conversations endpoint (app/api/chat/conversations/route.ts)",
          "status": "pending",
          "priority": "critical",
          "estimatedHours": 2,
          "sourceFile": "backend/routes/chat.py",
          "targetFile": "app/api/chat/conversations/route.ts",
          "subtasks": [
            "Create session endpoint",
            "Return session ID",
            "Add error handling"
          ],
          "dependencies": ["P2-T3"]
        },
        {
          "id": "P3-T3",
          "title": "Create messages endpoint (app/api/chat/messages/route.ts)",
          "status": "pending",
          "priority": "critical",
          "estimatedHours": 5,
          "sourceFile": "backend/routes/chat.py",
          "targetFile": "app/api/chat/messages/route.ts",
          "subtasks": [
            "Handle POST requests",
            "Support streaming and non-streaming",
            "Return message with citations",
            "Process markdown formatting",
            "Add error handling and logging"
          ],
          "dependencies": ["P2-T3", "P2-T9"]
        },
        {
          "id": "P3-T4",
          "title": "Create transcribe endpoint (app/api/chat/transcribe/route.ts)",
          "status": "pending",
          "priority": "high",
          "estimatedHours": 2,
          "sourceFile": "backend/routes/chat.py",
          "targetFile": "app/api/chat/transcribe/route.ts",
          "subtasks": [
            "Handle audio upload",
            "Call transcribe() - STT only",
            "Return transcript",
            "Add error handling"
          ],
          "dependencies": ["P2-T1"]
        },
        {
          "id": "P3-T5",
          "title": "Create message feedback endpoint (app/api/chat/messages/[id]/feedback/route.ts)",
          "status": "pending",
          "priority": "medium",
          "estimatedHours": 2,
          "sourceFile": "backend/routes/chat.py",
          "targetFile": "app/api/chat/messages/[id]/feedback/route.ts",
          "subtasks": [
            "Handle PUT requests",
            "Update message reaction",
            "Return updated status",
            "Add error handling"
          ],
          "dependencies": ["P2-T3"]
        },
        {
          "id": "P3-T6",
          "title": "Create citations endpoint (app/api/chat/citations/[id]/route.ts)",
          "status": "pending",
          "priority": "medium",
          "estimatedHours": 2,
          "sourceFile": "backend/routes/chat.py",
          "targetFile": "app/api/chat/citations/[id]/route.ts",
          "subtasks": [
            "Handle GET requests",
            "Fetch citation details",
            "Return citation data",
            "Add error handling"
          ],
          "dependencies": ["P2-T3"]
        },
        {
          "id": "P3-T7",
          "title": "Create TTS speak endpoint (app/api/tts/speak/route.ts)",
          "status": "pending",
          "priority": "high",
          "estimatedHours": 3,
          "sourceFile": "backend/routes/tts.py",
          "targetFile": "app/api/tts/speak/route.ts",
          "subtasks": [
            "Handle POST requests",
            "Call textToSpeech()",
            "Return audio file",
            "Implement auto-cleanup",
            "Add error handling"
          ],
          "dependencies": ["P2-T2"]
        },
        {
          "id": "P3-T8",
          "title": "Create agent settings endpoint (app/api/agent/settings/route.ts)",
          "status": "pending",
          "priority": "low",
          "estimatedHours": 1,
          "sourceFile": "backend/main.py",
          "targetFile": "app/api/agent/settings/route.ts",
          "subtasks": [
            "Return agent metadata",
            "Include avatar URL, name, etc.",
            "Add caching if needed"
          ],
          "dependencies": ["P1-T3"]
        }
      ]
    },
    {
      "phase": 4,
      "name": "Frontend Migration",
      "week": 4,
      "goal": "Migrate React components to Next.js App Router",
      "tasks": [
        {
          "id": "P4-T1",
          "title": "Copy and migrate React components",
          "status": "pending",
          "priority": "critical",
          "estimatedHours": 4,
          "subtasks": [
            "Copy frontend/src/components/ to components/",
            "Update imports for Next.js",
            "Add 'use client' to interactive components",
            "Convert to React Server Components where applicable"
          ],
          "components": [
            "VoiceMode.tsx",
            "ChatContainer.tsx",
            "AvatarMode.tsx",
            "ModeToggleMenu.tsx"
          ],
          "dependencies": ["P1-T3"]
        },
        {
          "id": "P4-T2",
          "title": "Update audio processing (speech-manager-optimized.ts)",
          "status": "pending",
          "priority": "critical",
          "estimatedHours": 3,
          "sourceFile": "frontend/src/speech-manager-optimized.ts",
          "targetFile": "lib/speech-manager-optimized.ts",
          "subtasks": [
            "Change MediaRecorder to output WebM",
            "Remove client-side FFmpeg dependencies",
            "Add Safari fallback (MP4)",
            "Test on all browsers"
          ],
          "dependencies": ["P1-T5"]
        },
        {
          "id": "P4-T3",
          "title": "Update API calls in components",
          "status": "pending",
          "priority": "high",
          "estimatedHours": 3,
          "subtasks": [
            "Change fetch URLs to /api/",
            "Update headers (remove base URL)",
            "Test streaming responses",
            "Add error handling"
          ],
          "dependencies": ["P4-T1", "P3-T1", "P3-T3"]
        },
        {
          "id": "P4-T4",
          "title": "Migrate avatar integration",
          "status": "pending",
          "priority": "high",
          "estimatedHours": 3,
          "subtasks": [
            "Update avatar config to use NEXT_PUBLIC_AVATAR_GLB_URL",
            "Add fallback avatar to public/avatars/",
            "Keep TalkingHead CDN approach",
            "Test avatar mode with all browsers"
          ],
          "dependencies": ["P4-T1"]
        },
        {
          "id": "P4-T5",
          "title": "Create main page (app/page.tsx)",
          "status": "pending",
          "priority": "high",
          "estimatedHours": 2,
          "subtasks": [
            "Create main UI layout",
            "Import VoiceMode and ChatContainer",
            "Add mode switching logic",
            "Style with Tailwind CSS"
          ],
          "dependencies": ["P4-T1"]
        },
        {
          "id": "P4-T6",
          "title": "Create root layout (app/layout.tsx)",
          "status": "pending",
          "priority": "high",
          "estimatedHours": 2,
          "subtasks": [
            "Set up HTML structure",
            "Add metadata",
            "Import global CSS",
            "Configure font loading"
          ],
          "dependencies": ["P1-T3"]
        },
        {
          "id": "P4-T7",
          "title": "Migrate CSS styles",
          "status": "pending",
          "priority": "medium",
          "estimatedHours": 2,
          "subtasks": [
            "Copy component CSS files",
            "Update CSS imports",
            "Test responsive design",
            "Verify dark/light mode"
          ],
          "dependencies": ["P4-T1"]
        },
        {
          "id": "P4-T8",
          "title": "Migrate hooks (useTalkingHead.ts, etc.)",
          "status": "pending",
          "priority": "high",
          "estimatedHours": 2,
          "sourceFile": "frontend/src/hooks/",
          "targetFile": "hooks/",
          "subtasks": [
            "Copy all custom hooks",
            "Update imports",
            "Test hook functionality"
          ],
          "dependencies": ["P4-T1"]
        }
      ]
    },
    {
      "phase": 5,
      "name": "Testing & Validation",
      "week": 5,
      "goal": "Comprehensive testing across all features and browsers",
      "tasks": [
        {
          "id": "P5-T1",
          "title": "Voice Mode feature parity testing",
          "status": "pending",
          "priority": "critical",
          "estimatedHours": 4,
          "testCases": [
            "Record audio → STT → AI → TTS → playback",
            "Conversation state persistence",
            "Particle animations",
            "Avatar mode toggle",
            "Error handling and retry logic"
          ],
          "dependencies": ["P4-T3"]
        },
        {
          "id": "P5-T2",
          "title": "Chat Mode feature parity testing",
          "status": "pending",
          "priority": "critical",
          "estimatedHours": 4,
          "testCases": [
            "Text input → AI response",
            "Message reactions (thumbs up/down)",
            "Citations display",
            "Per-message TTS playback",
            "Speech-to-text input",
            "Streaming responses"
          ],
          "dependencies": ["P4-T3"]
        },
        {
          "id": "P5-T3",
          "title": "TTS Providers testing",
          "status": "pending",
          "priority": "high",
          "estimatedHours": 3,
          "testCases": [
            "Test OpenAI TTS",
            "Test gTTS",
            "Test ElevenLabs",
            "Test Edge TTS",
            "Test StreamElements",
            "Verify fallback chain"
          ],
          "dependencies": ["P3-T7"]
        },
        {
          "id": "P5-T4",
          "title": "CustomGPT Integration testing",
          "status": "pending",
          "priority": "high",
          "estimatedHours": 3,
          "testCases": [
            "Session management",
            "Streaming responses",
            "Response truncation",
            "Message reactions API",
            "Citations API"
          ],
          "dependencies": ["P3-T3"]
        },
        {
          "id": "P5-T5",
          "title": "Browser compatibility testing",
          "status": "pending",
          "priority": "critical",
          "estimatedHours": 4,
          "browsers": [
            "Chrome (desktop + mobile)",
            "Firefox (desktop + mobile)",
            "Safari (desktop + iOS)",
            "Edge (desktop)"
          ],
          "testCases": [
            "WebM vs MP4 audio recording",
            "TalkingHead avatar rendering",
            "Responsive design",
            "Performance metrics"
          ],
          "dependencies": ["P5-T1", "P5-T2"]
        },
        {
          "id": "P5-T6",
          "title": "Performance testing",
          "status": "pending",
          "priority": "high",
          "estimatedHours": 3,
          "metrics": [
            "Voice pipeline: <10s on Vercel free tier",
            "Chat responses: <5s",
            "TTS generation: <3s",
            "Function size: <50 MB compressed",
            "Load testing: 10 concurrent users"
          ],
          "dependencies": ["P5-T1", "P5-T2"]
        },
        {
          "id": "P5-T7",
          "title": "Error handling testing",
          "status": "pending",
          "priority": "high",
          "estimatedHours": 3,
          "testCases": [
            "Test retry logic (simulate API failures)",
            "Test fallback chains (STT→AI→TTS)",
            "Test timeout scenarios",
            "Test invalid audio formats",
            "Test network failures"
          ],
          "dependencies": ["P5-T1", "P5-T2"]
        },
        {
          "id": "P5-T8",
          "title": "Create test report",
          "status": "pending",
          "priority": "medium",
          "estimatedHours": 2,
          "deliverables": [
            "Test results summary",
            "Performance benchmarks",
            "Browser compatibility matrix",
            "Known issues and limitations"
          ],
          "dependencies": ["P5-T5", "P5-T6", "P5-T7"]
        }
      ]
    },
    {
      "phase": 6,
      "name": "Deployment Setup",
      "week": 6,
      "goal": "Configure deployment platforms and create one-click deploy buttons",
      "tasks": [
        {
          "id": "P6-T1",
          "title": "Create vercel.json configuration",
          "status": "pending",
          "priority": "critical",
          "estimatedHours": 2,
          "subtasks": [
            "Configure builds",
            "Set environment variables",
            "Configure function timeouts",
            "Set function regions"
          ],
          "dependencies": ["P5-T8"]
        },
        {
          "id": "P6-T2",
          "title": "Test Vercel deployment",
          "status": "pending",
          "priority": "critical",
          "estimatedHours": 3,
          "subtasks": [
            "Run vercel deploy",
            "Verify production URL",
            "Test all features on Vercel",
            "Test edge function distribution",
            "Monitor function execution times"
          ],
          "dependencies": ["P6-T1"]
        },
        {
          "id": "P6-T3",
          "title": "Create Deploy to Vercel button",
          "status": "pending",
          "priority": "high",
          "estimatedHours": 2,
          "subtasks": [
            "Create button with env var prompts",
            "Add to README.md",
            "Test button flow end-to-end",
            "Document required env vars"
          ],
          "dependencies": ["P6-T2"]
        },
        {
          "id": "P6-T4",
          "title": "Create railway.json configuration",
          "status": "pending",
          "priority": "medium",
          "estimatedHours": 2,
          "subtasks": [
            "Configure Docker build",
            "Set deployment options",
            "Configure environment variables"
          ],
          "dependencies": ["P5-T8"]
        },
        {
          "id": "P6-T5",
          "title": "Create Deploy on Railway button",
          "status": "pending",
          "priority": "medium",
          "estimatedHours": 2,
          "subtasks": [
            "Create Railway button",
            "Add to README.md",
            "Test button flow",
            "Document as Docker fallback"
          ],
          "dependencies": ["P6-T4"]
        },
        {
          "id": "P6-T6",
          "title": "Update README.md with deployment instructions",
          "status": "pending",
          "priority": "high",
          "estimatedHours": 3,
          "subtasks": [
            "Add deployment options section",
            "Document Vercel deployment",
            "Document Railway deployment",
            "Add environment variables guide",
            "Add troubleshooting section"
          ],
          "dependencies": ["P6-T3", "P6-T5"]
        },
        {
          "id": "P6-T7",
          "title": "Update CLAUDE.md with Next.js architecture",
          "status": "pending",
          "priority": "high",
          "estimatedHours": 2,
          "subtasks": [
            "Document new architecture",
            "Update file structure",
            "Update API routes",
            "Update development commands"
          ],
          "dependencies": ["P5-T8"]
        },
        {
          "id": "P6-T8",
          "title": "Create docs/deployment/VERCEL_DEPLOYMENT.md",
          "status": "pending",
          "priority": "medium",
          "estimatedHours": 2,
          "subtasks": [
            "Detailed Vercel setup guide",
            "Environment variables configuration",
            "Custom domain setup",
            "Troubleshooting common issues"
          ],
          "dependencies": ["P6-T2"]
        },
        {
          "id": "P6-T9",
          "title": "Update embed script examples",
          "status": "pending",
          "priority": "medium",
          "estimatedHours": 2,
          "subtasks": [
            "Update script URLs",
            "Test embed scripts with Next.js version",
            "Update integration documentation"
          ],
          "dependencies": ["P6-T2"]
        },
        {
          "id": "P6-T10",
          "title": "Create migration guide for existing Docker users",
          "status": "pending",
          "priority": "medium",
          "estimatedHours": 2,
          "subtasks": [
            "Document migration steps",
            "Environment variable changes",
            "Rollback instructions",
            "Feature comparison"
          ],
          "dependencies": ["P6-T6"]
        }
      ]
    },
    {
      "phase": 7,
      "name": "Optimization & Polish",
      "week": 7,
      "goal": "Performance optimization and edge case handling",
      "tasks": [
        {
          "id": "P7-T1",
          "title": "Enable Next.js ISR and optimize bundle",
          "status": "pending",
          "priority": "high",
          "estimatedHours": 3,
          "subtasks": [
            "Enable ISR where applicable",
            "Optimize bundle size (tree-shaking)",
            "Implement code splitting",
            "Add dynamic imports"
          ],
          "dependencies": ["P6-T2"]
        },
        {
          "id": "P7-T2",
          "title": "Add response caching",
          "status": "pending",
          "priority": "medium",
          "estimatedHours": 2,
          "subtasks": [
            "Cache agent settings",
            "Cache static resources",
            "Implement cache invalidation"
          ],
          "dependencies": ["P6-T2"]
        },
        {
          "id": "P7-T3",
          "title": "Optimize avatar loading",
          "status": "pending",
          "priority": "medium",
          "estimatedHours": 2,
          "subtasks": [
            "Implement lazy loading",
            "Add preload hints",
            "Optimize TalkingHead library loading"
          ],
          "dependencies": ["P6-T2"]
        },
        {
          "id": "P7-T4",
          "title": "Add Vercel Analytics",
          "status": "pending",
          "priority": "medium",
          "estimatedHours": 1,
          "subtasks": [
            "Install @vercel/analytics",
            "Configure analytics",
            "Test data collection"
          ],
          "dependencies": ["P6-T2"]
        },
        {
          "id": "P7-T5",
          "title": "Add custom logging for API routes",
          "status": "pending",
          "priority": "medium",
          "estimatedHours": 2,
          "subtasks": [
            "Keep [TIMING] logs",
            "Add structured logging",
            "Add request/response logging"
          ],
          "dependencies": ["P6-T2"]
        },
        {
          "id": "P7-T6",
          "title": "Add error tracking (Sentry or Vercel)",
          "status": "pending",
          "priority": "medium",
          "estimatedHours": 2,
          "subtasks": [
            "Choose error tracking service",
            "Install and configure",
            "Test error reporting",
            "Set up alerts"
          ],
          "dependencies": ["P6-T2"]
        },
        {
          "id": "P7-T7",
          "title": "Handle Safari audio format gracefully",
          "status": "pending",
          "priority": "high",
          "estimatedHours": 2,
          "subtasks": [
            "Improve format detection",
            "Better error messages",
            "Fallback UX improvements"
          ],
          "dependencies": ["P5-T5"]
        },
        {
          "id": "P7-T8",
          "title": "Add timeout warnings",
          "status": "pending",
          "priority": "medium",
          "estimatedHours": 2,
          "subtasks": [
            "Detect long-running operations",
            "Show timeout warnings to user",
            "Suggest Pro tier upgrade"
          ],
          "dependencies": ["P6-T2"]
        },
        {
          "id": "P7-T9",
          "title": "Improve cold start experience",
          "status": "pending",
          "priority": "medium",
          "estimatedHours": 2,
          "subtasks": [
            "Add loading states",
            "Improve initial page load",
            "Optimize first function invocation"
          ],
          "dependencies": ["P6-T2"]
        },
        {
          "id": "P7-T10",
          "title": "Add rate limiting for API routes",
          "status": "pending",
          "priority": "medium",
          "estimatedHours": 2,
          "subtasks": [
            "Implement rate limiting",
            "Configure limits per endpoint",
            "Add rate limit headers",
            "Handle rate limit errors"
          ],
          "dependencies": ["P6-T2"]
        },
        {
          "id": "P7-T11",
          "title": "Validate all user inputs",
          "status": "pending",
          "priority": "high",
          "estimatedHours": 2,
          "subtasks": [
            "Add input validation for all endpoints",
            "Sanitize file uploads",
            "Add request size limits"
          ],
          "dependencies": ["P6-T2"]
        },
        {
          "id": "P7-T12",
          "title": "Add CORS configuration",
          "status": "pending",
          "priority": "high",
          "estimatedHours": 1,
          "subtasks": [
            "Configure CORS for production",
            "Add allowed origins",
            "Test cross-origin requests"
          ],
          "dependencies": ["P6-T2"]
        }
      ]
    },
    {
      "phase": 8,
      "name": "Launch & Migration",
      "week": 8,
      "goal": "Launch Next.js version and migrate users",
      "tasks": [
        {
          "id": "P8-T1",
          "title": "Deploy to beta users",
          "status": "pending",
          "priority": "critical",
          "estimatedHours": 2,
          "subtasks": [
            "Identify 5-10 beta testers",
            "Deploy beta version",
            "Provide testing instructions",
            "Collect initial feedback"
          ],
          "dependencies": ["P7-T12"]
        },
        {
          "id": "P8-T2",
          "title": "Collect feedback and fix critical bugs",
          "status": "pending",
          "priority": "critical",
          "estimatedHours": 8,
          "subtasks": [
            "Monitor beta testing",
            "Prioritize bug reports",
            "Fix critical issues",
            "Deploy fixes"
          ],
          "dependencies": ["P8-T1"]
        },
        {
          "id": "P8-T3",
          "title": "Validate one-click deploy UX",
          "status": "pending",
          "priority": "high",
          "estimatedHours": 3,
          "subtasks": [
            "Test Deploy to Vercel button",
            "Measure time to deployment",
            "Collect user feedback",
            "Improve UX if needed"
          ],
          "dependencies": ["P8-T1"]
        },
        {
          "id": "P8-T4",
          "title": "Final review of all documentation",
          "status": "pending",
          "priority": "high",
          "estimatedHours": 3,
          "subtasks": [
            "Review README.md",
            "Review CLAUDE.md",
            "Review deployment guides",
            "Check for broken links"
          ],
          "dependencies": ["P6-T10"]
        },
        {
          "id": "P8-T5",
          "title": "Record video walkthrough",
          "status": "pending",
          "priority": "medium",
          "estimatedHours": 4,
          "subtasks": [
            "Script video content",
            "Record deployment process",
            "Edit video",
            "Upload to YouTube/Vimeo",
            "Add to documentation"
          ],
          "dependencies": ["P8-T3"]
        },
        {
          "id": "P8-T6",
          "title": "Create FAQ for common issues",
          "status": "pending",
          "priority": "medium",
          "estimatedHours": 2,
          "subtasks": [
            "Compile common issues from beta testing",
            "Write FAQ entries",
            "Add to documentation"
          ],
          "dependencies": ["P8-T2"]
        },
        {
          "id": "P8-T7",
          "title": "Update GitHub README with new badges",
          "status": "pending",
          "priority": "low",
          "estimatedHours": 1,
          "subtasks": [
            "Add deployment badges",
            "Add version badge",
            "Update screenshots if needed"
          ],
          "dependencies": ["P8-T4"]
        },
        {
          "id": "P8-T8",
          "title": "Merge to main branch",
          "status": "pending",
          "priority": "critical",
          "estimatedHours": 2,
          "subtasks": [
            "Create pull request",
            "Final code review",
            "Merge to main",
            "Verify production deployment"
          ],
          "dependencies": ["P8-T2", "P8-T4"]
        },
        {
          "id": "P8-T9",
          "title": "Tag release v2.0.0-nextjs",
          "status": "pending",
          "priority": "high",
          "estimatedHours": 1,
          "subtasks": [
            "Create git tag",
            "Write release notes",
            "Publish GitHub release"
          ],
          "dependencies": ["P8-T8"]
        },
        {
          "id": "P8-T10",
          "title": "Notify existing Docker users",
          "status": "pending",
          "priority": "medium",
          "estimatedHours": 2,
          "subtasks": [
            "Draft announcement",
            "Send notifications",
            "Provide migration guide link"
          ],
          "dependencies": ["P8-T9"]
        },
        {
          "id": "P8-T11",
          "title": "Create side-by-side comparison guide",
          "status": "pending",
          "priority": "medium",
          "estimatedHours": 2,
          "subtasks": [
            "Compare Python vs Next.js versions",
            "Document pros/cons of each",
            "Provide migration decision tree"
          ],
          "dependencies": ["P8-T9"]
        },
        {
          "id": "P8-T12",
          "title": "Keep Python/Docker version as v1.x branch",
          "status": "pending",
          "priority": "high",
          "estimatedHours": 1,
          "subtasks": [
            "Create v1.x branch",
            "Tag final Python version",
            "Update branch documentation"
          ],
          "dependencies": ["P8-T8"]
        },
        {
          "id": "P8-T13",
          "title": "Set deprecation timeline",
          "status": "pending",
          "priority": "low",
          "estimatedHours": 1,
          "subtasks": [
            "Define 6-12 month timeline",
            "Communicate to users",
            "Document in README"
          ],
          "dependencies": ["P8-T12"]
        }
      ]
    }
  ],
  "summary": {
    "totalTasks": 99,
    "totalEstimatedHours": "40-60",
    "criticalTasks": 19,
    "highPriorityTasks": 35,
    "mediumPriorityTasks": 40,
    "lowPriorityTasks": 5
  }
}
